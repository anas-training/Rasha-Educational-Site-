<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentence Builder Race - Grade 4</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(to bottom, #87CEEB, #E0F6FF);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 32px;
        }

        /* Score Board */
        .scoreboard {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .score-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: bold;
        }

        /* Target Sentence */
        .target-box {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .target-sentence {
            font-size: 24px;
            color: #2c3e50;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .hint {
            color: #7f8c8d;
            font-style: italic;
        }

        /* Game Area */
        .game-area {
            background: #e8f5e9;
            border: 3px solid #4CAF50;
            border-radius: 15px;
            height: 400px;
            position: relative;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .drop-zone {
            height: 300px;
            position: relative;
            padding: 20px;
            text-align: center;
        }

        .start-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: #666;
        }

        .falling-word {
            position: absolute;
            padding: 10px 20px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 18px;
            transition: transform 0.2s;
            animation: fall 6s linear;
        }

        .falling-word:hover {
            transform: scale(1.1);
        }

        @keyframes fall {
            from {
                top: -50px;
            }
            to {
                top: 350px;
            }
        }

        .noun { background: #9b59b6; }
        .verb { background: #e74c3c; }
        .adjective { background: #3498db; }
        .adverb { background: #2ecc71; }
        .article { background: #f39c12; }
        .pronoun { background: #e67e22; }
        .preposition { background: #1abc9c; }
        .conjunction { background: #34495e; }
        .punctuation { 
            background: #2c3e50;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }

        /* Sentence Building Area */
        .sentence-area {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            min-height: 100px;
            margin-bottom: 20px;
        }

        .sentence-label {
            color: white;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .built-sentence {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            min-height: 40px;
        }

        .word-block {
            background: white;
            padding: 8px 15px;
            border-radius: 8px;
            color: #2c3e50;
            font-weight: bold;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-start {
            background: #2ecc71;
            color: white;
        }

        .btn-check {
            background: #3498db;
            color: white;
        }

        .btn-clear {
            background: #e74c3c;
            color: white;
        }

        .btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }

        /* Legend */
        .legend {
            background: #f8f8f8;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .legend-title {
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .legend-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .legend-item {
            padding: 5px 12px;
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }

        /* Difficulty Selector */
        .difficulty {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .diff-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .diff-easy {
            background: #2ecc71;
            color: white;
        }

        .diff-medium {
            background: #f39c12;
            color: white;
        }

        .diff-hard {
            background: #e74c3c;
            color: white;
        }

        .diff-btn.active {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Message */
        .message {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .message.show {
            display: block;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
        }

        /* Instructions */
        .instructions {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .instructions h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }

        .instructions p {
            margin-bottom: 10px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù Sentence Builder Race - Grade 4 üìù</h1>
        
        <!-- Scoreboard -->
        <div class="scoreboard">
            <div class="score-item">‚≠ê Score: <span id="score">0</span></div>
            <div class="score-item">üìä Level: <span id="level">1</span></div>
            <div class="score-item">‚úÖ Correct: <span id="correct">0</span></div>
            <div class="score-item">üî• Streak: <span id="streak">0</span></div>
        </div>

        <!-- Difficulty Selection -->
        <div class="difficulty">
            <button class="diff-btn diff-easy active" onclick="setDifficulty('easy')">Easy</button>
            <button class="diff-btn diff-medium" onclick="setDifficulty('medium')">Medium</button>
            <button class="diff-btn diff-hard" onclick="setDifficulty('hard')">Hard</button>
        </div>

        <!-- Target Sentence -->
        <div class="target-box">
            <div class="target-sentence" id="targetSentence">
                The happy dog runs fast.
            </div>
            <div class="hint" id="hint">
                Click Start Game to begin!
            </div>
        </div>

        <!-- Game Area -->
        <div class="game-area">
            <div class="drop-zone" id="dropZone">
                <div class="start-message" id="startMessage">
                    üéÆ Press "Start Game" to begin!<br>
                    Words will fall from here
                </div>
            </div>
        </div>

        <!-- Sentence Building Area -->
        <div class="sentence-area">
            <div class="sentence-label">Your Sentence:</div>
            <div class="built-sentence" id="builtSentence">
                <!-- Words will appear here -->
            </div>
        </div>

        <!-- Message Area -->
        <div class="message" id="message"></div>

        <!-- Controls -->
        <div class="controls">
            <button class="btn btn-start" id="startBtn" onclick="startGame()">Start Game</button>
            <button class="btn btn-check" id="checkBtn" onclick="checkSentence()" disabled>Check Sentence</button>
            <button class="btn btn-clear" id="clearBtn" onclick="clearSentence()" disabled>Clear</button>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-title">Word Types:</div>
            <div class="legend-grid">
                <span class="legend-item noun">Noun</span>
                <span class="legend-item verb">Verb</span>
                <span class="legend-item adjective">Adjective</span>
                <span class="legend-item adverb">Adverb</span>
                <span class="legend-item article">Article</span>
                <span class="legend-item pronoun">Pronoun</span>
                <span class="legend-item preposition">Preposition</span>
                <span class="legend-item conjunction">Conjunction</span>
                <span class="legend-item punctuation">.</span>
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h3>üìñ How to Play:</h3>
            <p><strong>1.</strong> Look at the target sentence at the top</p>
            <p><strong>2.</strong> Click "Start Game" to begin</p>
            <p><strong>3.</strong> Words will fall from the sky - click them in the correct order</p>
            <p><strong>4.</strong> Build the sentence word by word</p>
            <p><strong>5.</strong> Click "Check Sentence" when you're done</p>
            <p><strong>6.</strong> Use "Clear" if you make a mistake</p>
            <p><strong>üí° Tip:</strong> Colors help identify word types - nouns are purple, verbs are red, etc.</p>
        </div>
    </div>

    <script>
        // Game Data
        const sentences = {
            easy: [
                {
                    text: "The happy dog runs fast.",
                    words: [
                        {text: "The", type: "article"},
                        {text: "happy", type: "adjective"},
                        {text: "dog", type: "noun"},
                        {text: "runs", type: "verb"},
                        {text: "fast", type: "adverb"},
                        {text: ".", type: "punctuation"}
                    ]
                },
                {
                    text: "Birds fly in the sky.",
                    words: [
                        {text: "Birds", type: "noun"},
                        {text: "fly", type: "verb"},
                        {text: "in", type: "preposition"},
                        {text: "the", type: "article"},
                        {text: "sky", type: "noun"},
                        {text: ".", type: "punctuation"}
                    ]
                }
            ],
            medium: [
                {
                    text: "The smart students quickly finished their homework.",
                    words: [
                        {text: "The", type: "article"},
                        {text: "smart", type: "adjective"},
                        {text: "students", type: "noun"},
                        {text: "quickly", type: "adverb"},
                        {text: "finished", type: "verb"},
                        {text: "their", type: "pronoun"},
                        {text: "homework", type: "noun"},
                        {text: ".", type: "punctuation"}
                    ]
                }
            ],
            hard: [
                {
                    text: "Although it rained, we enjoyed our trip.",
                    words: [
                        {text: "Although", type: "conjunction"},
                        {text: "it", type: "pronoun"},
                        {text: "rained", type: "verb"},
                        {text: ",", type: "punctuation"},
                        {text: "we", type: "pronoun"},
                        {text: "enjoyed", type: "verb"},
                        {text: "our", type: "pronoun"},
                        {text: "trip", type: "noun"},
                        {text: ".", type: "punctuation"}
                    ]
                }
            ]
        };

        // Distractor words
        const distractors = {
            easy: [{text: "cat", type: "noun"}, {text: "big", type: "adjective"}],
            medium: [{text: "slowly", type: "adverb"}, {text: "book", type: "noun"}],
            hard: [{text: "because", type: "conjunction"}, {text: "them", type: "pronoun"}]
        };

        // Game State
        let currentSentence = null;
        let currentWords = [];
        let builtWords = [];
        let score = 0;
        let level = 1;
        let correct = 0;
        let streak = 0;
        let difficulty = 'easy';
        let gameActive = false;
        let dropInterval = null;

        function setDifficulty(diff) {
            difficulty = diff;
            document.querySelectorAll('.diff-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.diff-${diff}`).classList.add('active');
        }

        function startGame() {
            gameActive = true;
            builtWords = [];
            
            // Setup sentence
            const sentList = sentences[difficulty];
            currentSentence = sentList[Math.floor(Math.random() * sentList.length)];
            
            // Mix in distractors
            currentWords = [...currentSentence.words, ...distractors[difficulty]];
            currentWords = currentWords.sort(() => Math.random() - 0.5);
            
            // Update UI
            document.getElementById('targetSentence').textContent = currentSentence.text;
            document.getElementById('hint').textContent = 'Build this sentence!';
            document.getElementById('startMessage').style.display = 'none';
            document.getElementById('dropZone').innerHTML = '';
            document.getElementById('builtSentence').innerHTML = '';
            
            // Enable/disable buttons
            document.getElementById('startBtn').disabled = true;
            document.getElementById('checkBtn').disabled = false;
            document.getElementById('clearBtn').disabled = false;
            
            // Start dropping words
            dropWords();
        }

        function dropWords() {
            let index = 0;
            
            dropInterval = setInterval(() => {
                if (index >= currentWords.length) {
                    clearInterval(dropInterval);
                    setTimeout(() => {
                        if (gameActive) dropWords();
                    }, 2000);
                    return;
                }
                
                const word = currentWords[index];
                const wordEl = document.createElement('div');
                wordEl.className = `falling-word ${word.type}`;
                wordEl.textContent = word.text;
                wordEl.style.left = Math.random() * 80 + '%';
                wordEl.onclick = () => catchWord(word, wordEl);
                
                document.getElementById('dropZone').appendChild(wordEl);
                
                setTimeout(() => {
                    if (wordEl.parentNode) wordEl.remove();
                }, 6000);
                
                index++;
            }, 1000);
        }

        function catchWord(word, element) {
            if (!gameActive) return;
            
            builtWords.push(word);
            element.remove();
            updateSentence();
        }

        function updateSentence() {
            const container = document.getElementById('builtSentence');
            container.innerHTML = '';
            
            builtWords.forEach(word => {
                const block = document.createElement('div');
                block.className = 'word-block';
                block.textContent = word.text;
                container.appendChild(block);
            });
        }

        function checkSentence() {
            if (!gameActive) return;
            
            const built = builtWords.map(w => w.text).join(' ')
                .replace(/ \./g, '.')
                .replace(/ ,/g, ',');
            const target = currentSentence.text;
            
            if (built === target) {
                score += 100;
                correct++;
                streak++;
                showMessage('Correct! Great job! üéâ', 'success');
                
                setTimeout(() => {
                    if (correct % 3 === 0) level++;
                    updateScore();
                    startGame();
                }, 2000);
            } else {
                streak = 0;
                showMessage('Not quite right. Try again!', 'error');
            }
            
            updateScore();
        }

        function clearSentence() {
            builtWords = [];
            updateSentence();
        }

        function showMessage(text, type) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = `message ${type} show`;
            
            setTimeout(() => {
                msg.classList.remove('show');
            }, 3000);
        }

        function updateScore() {
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            document.getElementById('correct').textContent = correct;
            document.getElementById('streak').textContent = streak;
        }

        // Initialize
        updateScore();
    </script>
</body>
</html>